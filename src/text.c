#include "text.h"

static const unsigned char font[128][5] = {
    ['A'] = {
        0b01110,
        0b10001,
        0b10001,
        0b11111,
        0b10001,
    },
    ['B'] = {
        0b11110,
        0b10001,
        0b11110,
        0b10001,
        0b11110,
    },
    ['C'] = {
        0b01110,
        0b10001,
        0b10000,
        0b10001,
        0b01110,
    },
    ['D'] = {
        0b11110,
        0b10001,
        0b10001,
        0b10001,
        0b11110,
    },
    ['E'] = {
        0b11111,
        0b10000,
        0b11111,
        0b10000,
        0b11111,
    },
    ['F'] = {
        0b11111,
        0b10000,
        0b11111,
        0b10000,
        0b10000,
    },
    ['G'] = {
        0b01110,
        0b10001,
        0b10000,
        0b10001,
        0b01110,
    },
    ['H'] = {
        0b10001,
        0b10001,
        0b11111,
        0b10001,
        0b10001,
    },
    ['I'] = {
        0b11111,
        0b00100,
        0b00100,
        0b00100,
        0b11111,
    },
    ['J'] = {
        0b11111,
        0b00100,
        0b00100,
        0b00100,
        0b11111,
    },
    ['K'] = {
        0b10001,
        0b10010,
        0b11100,
        0b10010,
        0b10001,
    },
    ['L'] = {
        0b10000,
        0b10000,
        0b10000,
        0b10000,
        0b11111,
    },
    ['M'] = {
        0b10001,
        0b11011,
        0b10101,
        0b10001,
        0b10001,
    },
    ['N'] = {
        0b10001,
        0b11011,
        0b10101,
        0b10001,
        0b10001,
    },
    ['O'] = {
        0b01110,
        0b10001,
        0b10001,
        0b10001,
        0b01110,
    },
    ['P'] = {
        0b11111,
        0b10000,
        0b11111,
        0b10000,
        0b10000,
    },
    ['Q'] = {
        0b01110,
        0b10001,
        0b10001,
        0b10001,
        0b01110,
    },
    ['R'] = {
        0b11111,
        0b10000,
        0b11111,
        0b10010,
        0b10001,
    },
    ['S'] = {
        0b01110,
        0b10001,
        0b10000,
        0b10001,
        0b01110,
    },
    ['T'] = {
        0b11111,
        0b00100,
        0b00100,
        0b00100,
        0b00100,
    },
    ['U'] = {
        0b10001,
        0b10001,
        0b10001,
        0b10001,
        0b11111,
    },
    ['V'] = {
        0b10001,
        0b10001,
        0b10001,
        0b10001,
        0b01110,
    },
    ['W'] = {
        0b10001,
        0b10001,
        0b10001,
        0b10101,
        0b11011,
    },
    ['X'] = {
        0b10001,
        0b10001,
        0b01010,
        0b00100,
        0b10001,
    },
    ['Y'] = {
        0b10001,
        0b10001,
        0b01010,
        0b00100,
        0b10001,
    },
    ['Z'] = {
        0b11111,
        0b00010,
        0b00100,
        0b01000,
        0b11111,
    },
};

// Function will return the font array for the text
unsigned char *getText(const char *text)
{
    // Need to check if the text is in the font array
    // If it is then we return the font array
    // If not then we return NULL
    if (font[text[0]])
    {
        unsigned char* ret = malloc(FONT_HEIGHT * sizeof(unsigned char));
        if(!ret) {
            printf("Failed to allocate memory for font array\n");
            exit(1);
        }
        memccpy(ret, font[text[0]], FONT_HEIGHT, 5);
        return ret;
    }
    return NULL;
}
